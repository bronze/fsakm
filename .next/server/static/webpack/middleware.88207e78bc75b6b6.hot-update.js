"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./src/middleware.ts":
/*!***************************!*\
  !*** ./src/middleware.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/.pnpm/next@15.3.2_react-dom@19.1.0_react@19.1.0/node_modules/next/dist/esm/api/server.js\");\n/* harmony import */ var _formatjs_intl_localematcher__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @formatjs/intl-localematcher */ \"(middleware)/./node_modules/.pnpm/@formatjs+intl-localematcher@0.6.1/node_modules/@formatjs/intl-localematcher/lib/index.js\");\n/* harmony import */ var negotiator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! negotiator */ \"(middleware)/./node_modules/.pnpm/negotiator@1.0.0/node_modules/negotiator/index.js\");\n/* harmony import */ var negotiator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(negotiator__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nconst locales = JSON.parse(\"[\\\"pt\\\",\\\"en\\\",\\\"es\\\"]\");\nconst defaultLocale = \"pt\";\nconst HAS_LOCALE_RE = new RegExp(`^\\\\/(${locales.filter((l)=>l !== defaultLocale).join(\"|\")})(\\\\/|$)`);\nconst COOKIE_NAME = \"NEXT_LOCALE\";\nfunction getHeadersLocale(request) {\n    const headers = Object.fromEntries(request.headers.entries());\n    const languages = new (negotiator__WEBPACK_IMPORTED_MODULE_2___default())({\n        headers\n    }).languages(locales);\n    const locale = (0,_formatjs_intl_localematcher__WEBPACK_IMPORTED_MODULE_1__.match)(languages, locales, defaultLocale);\n    return locale;\n}\nfunction middleware(request) {\n    const { pathname } = request.nextUrl;\n    const pathnameHasLocale = HAS_LOCALE_RE.test(pathname);\n    const cookieLocale = request.cookies.get(COOKIE_NAME)?.value;\n    if (!pathnameHasLocale && !pathname.startsWith(`/${defaultLocale}`)) {\n        const locale = cookieLocale || getHeadersLocale(request);\n        if (locale === defaultLocale) {\n            // Deixa a URL como est√°, sem prefixo\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n        }\n        // Redireciona para o locale com prefixo\n        const url = new URL(`/${locale}${pathname}`, request.url);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(url);\n    }\n    const [, requestLocale] = pathname.split(\"/\", 2);\n    if (requestLocale && requestLocale !== cookieLocale) {\n        const response = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n        response.cookies.set(COOKIE_NAME, requestLocale);\n        return response;\n    }\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vc3JjL21pZGRsZXdhcmUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBd0M7QUFFeUI7QUFDOUI7QUFFbkMsTUFBTUksVUFBVUMsS0FBS0MsS0FBSyxDQUFDQyx3QkFBMEI7QUFDckQsTUFBTUcsZ0JBQWdCSCxJQUFpQztBQUN2RCxNQUFNSyxnQkFBZ0IsSUFBSUMsT0FDeEIsQ0FBQyxLQUFLLEVBQUVULFFBQVFVLE1BQU0sQ0FBQ0MsQ0FBQUEsSUFBS0EsTUFBTUwsZUFBZU0sSUFBSSxDQUFDLEtBQUssUUFBUSxDQUFDO0FBRXRFLE1BQU1DLGNBQWM7QUFFcEIsU0FBU0MsaUJBQWlCQyxPQUFvQjtJQUM1QyxNQUFNQyxVQUFVQyxPQUFPQyxXQUFXLENBQUNILFFBQVFDLE9BQU8sQ0FBQ0csT0FBTztJQUMxRCxNQUFNQyxZQUFZLElBQUlyQixtREFBVUEsQ0FBQztRQUFDaUI7SUFBTyxHQUFHSSxTQUFTLENBQUNwQjtJQUN0RCxNQUFNcUIsU0FBU3ZCLG1FQUFXQSxDQUFDc0IsV0FBV3BCLFNBQVNNO0lBQy9DLE9BQU9lO0FBQ1Q7QUFFTyxTQUFTQyxXQUFXUCxPQUFvQjtJQUM3QyxNQUFNLEVBQUNRLFFBQVEsRUFBQyxHQUFHUixRQUFRUyxPQUFPO0lBQ2xDLE1BQU1DLG9CQUFvQmpCLGNBQWNrQixJQUFJLENBQUNIO0lBQzdDLE1BQU1JLGVBQWVaLFFBQVFhLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDaEIsY0FBY2lCO0lBRXZELElBQUksQ0FBQ0wscUJBQXFCLENBQUNGLFNBQVNRLFVBQVUsQ0FBQyxDQUFDLENBQUMsRUFBRXpCLGVBQWUsR0FBRztRQUNuRSxNQUFNZSxTQUFTTSxnQkFBZ0JiLGlCQUFpQkM7UUFFaEQsSUFBSU0sV0FBV2YsZUFBZTtZQUM1QixxQ0FBcUM7WUFDckMsT0FBT1YscURBQVlBLENBQUNvQyxJQUFJO1FBQzFCO1FBRUEsd0NBQXdDO1FBQ3hDLE1BQU1DLE1BQU0sSUFBSUMsSUFBSSxDQUFDLENBQUMsRUFBRWIsU0FBU0UsVUFBVSxFQUFFUixRQUFRa0IsR0FBRztRQUN4RCxPQUFPckMscURBQVlBLENBQUN1QyxRQUFRLENBQUNGO0lBQy9CO0lBRUEsTUFBTSxHQUFHRyxjQUFjLEdBQUdiLFNBQVNjLEtBQUssQ0FBQyxLQUFLO0lBRTlDLElBQUlELGlCQUFpQkEsa0JBQWtCVCxjQUFjO1FBQ25ELE1BQU1XLFdBQVcxQyxxREFBWUEsQ0FBQ29DLElBQUk7UUFDbENNLFNBQVNWLE9BQU8sQ0FBQ1csR0FBRyxDQUFDMUIsYUFBYXVCO1FBQ2xDLE9BQU9FO0lBQ1Q7SUFFQSxPQUFPMUMscURBQVlBLENBQUNvQyxJQUFJO0FBQzFCIiwic291cmNlcyI6WyIvaG9tZS9icm9uemUvY29kaW5nL2ZzYWttL3NyYy9taWRkbGV3YXJlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7TmV4dFJlc3BvbnNlfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIlxuaW1wb3J0IHR5cGUge05leHRSZXF1ZXN0fSBmcm9tIFwibmV4dC9zZXJ2ZXJcIlxuaW1wb3J0IHttYXRjaCBhcyBtYXRjaExvY2FsZX0gZnJvbSBcIkBmb3JtYXRqcy9pbnRsLWxvY2FsZW1hdGNoZXJcIlxuaW1wb3J0IE5lZ290aWF0b3IgZnJvbSBcIm5lZ290aWF0b3JcIlxuXG5jb25zdCBsb2NhbGVzID0gSlNPTi5wYXJzZShwcm9jZXNzLmVudi5ORVhUUkFfTE9DQUxFUyEpIGFzIHN0cmluZ1tdXG5jb25zdCBkZWZhdWx0TG9jYWxlID0gcHJvY2Vzcy5lbnYuTkVYVFJBX0RFRkFVTFRfTE9DQUxFIVxuY29uc3QgSEFTX0xPQ0FMRV9SRSA9IG5ldyBSZWdFeHAoXG4gIGBeXFxcXC8oJHtsb2NhbGVzLmZpbHRlcihsID0+IGwgIT09IGRlZmF1bHRMb2NhbGUpLmpvaW4oXCJ8XCIpfSkoXFxcXC98JClgXG4pXG5jb25zdCBDT09LSUVfTkFNRSA9IFwiTkVYVF9MT0NBTEVcIlxuXG5mdW5jdGlvbiBnZXRIZWFkZXJzTG9jYWxlKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KTogc3RyaW5nIHtcbiAgY29uc3QgaGVhZGVycyA9IE9iamVjdC5mcm9tRW50cmllcyhyZXF1ZXN0LmhlYWRlcnMuZW50cmllcygpKVxuICBjb25zdCBsYW5ndWFnZXMgPSBuZXcgTmVnb3RpYXRvcih7aGVhZGVyc30pLmxhbmd1YWdlcyhsb2NhbGVzKVxuICBjb25zdCBsb2NhbGUgPSBtYXRjaExvY2FsZShsYW5ndWFnZXMsIGxvY2FsZXMsIGRlZmF1bHRMb2NhbGUpXG4gIHJldHVybiBsb2NhbGVcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1pZGRsZXdhcmUocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgY29uc3Qge3BhdGhuYW1lfSA9IHJlcXVlc3QubmV4dFVybFxuICBjb25zdCBwYXRobmFtZUhhc0xvY2FsZSA9IEhBU19MT0NBTEVfUkUudGVzdChwYXRobmFtZSlcbiAgY29uc3QgY29va2llTG9jYWxlID0gcmVxdWVzdC5jb29raWVzLmdldChDT09LSUVfTkFNRSk/LnZhbHVlXG5cbiAgaWYgKCFwYXRobmFtZUhhc0xvY2FsZSAmJiAhcGF0aG5hbWUuc3RhcnRzV2l0aChgLyR7ZGVmYXVsdExvY2FsZX1gKSkge1xuICAgIGNvbnN0IGxvY2FsZSA9IGNvb2tpZUxvY2FsZSB8fCBnZXRIZWFkZXJzTG9jYWxlKHJlcXVlc3QpXG5cbiAgICBpZiAobG9jYWxlID09PSBkZWZhdWx0TG9jYWxlKSB7XG4gICAgICAvLyBEZWl4YSBhIFVSTCBjb21vIGVzdMOhLCBzZW0gcHJlZml4b1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5uZXh0KClcbiAgICB9XG5cbiAgICAvLyBSZWRpcmVjaW9uYSBwYXJhIG8gbG9jYWxlIGNvbSBwcmVmaXhvXG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChgLyR7bG9jYWxlfSR7cGF0aG5hbWV9YCwgcmVxdWVzdC51cmwpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdCh1cmwpXG4gIH1cblxuICBjb25zdCBbLCByZXF1ZXN0TG9jYWxlXSA9IHBhdGhuYW1lLnNwbGl0KFwiL1wiLCAyKVxuXG4gIGlmIChyZXF1ZXN0TG9jYWxlICYmIHJlcXVlc3RMb2NhbGUgIT09IGNvb2tpZUxvY2FsZSkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gTmV4dFJlc3BvbnNlLm5leHQoKVxuICAgIHJlc3BvbnNlLmNvb2tpZXMuc2V0KENPT0tJRV9OQU1FLCByZXF1ZXN0TG9jYWxlKVxuICAgIHJldHVybiByZXNwb25zZVxuICB9XG5cbiAgcmV0dXJuIE5leHRSZXNwb25zZS5uZXh0KClcbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJtYXRjaCIsIm1hdGNoTG9jYWxlIiwiTmVnb3RpYXRvciIsImxvY2FsZXMiLCJKU09OIiwicGFyc2UiLCJwcm9jZXNzIiwiZW52IiwiTkVYVFJBX0xPQ0FMRVMiLCJkZWZhdWx0TG9jYWxlIiwiTkVYVFJBX0RFRkFVTFRfTE9DQUxFIiwiSEFTX0xPQ0FMRV9SRSIsIlJlZ0V4cCIsImZpbHRlciIsImwiLCJqb2luIiwiQ09PS0lFX05BTUUiLCJnZXRIZWFkZXJzTG9jYWxlIiwicmVxdWVzdCIsImhlYWRlcnMiLCJPYmplY3QiLCJmcm9tRW50cmllcyIsImVudHJpZXMiLCJsYW5ndWFnZXMiLCJsb2NhbGUiLCJtaWRkbGV3YXJlIiwicGF0aG5hbWUiLCJuZXh0VXJsIiwicGF0aG5hbWVIYXNMb2NhbGUiLCJ0ZXN0IiwiY29va2llTG9jYWxlIiwiY29va2llcyIsImdldCIsInZhbHVlIiwic3RhcnRzV2l0aCIsIm5leHQiLCJ1cmwiLCJVUkwiLCJyZWRpcmVjdCIsInJlcXVlc3RMb2NhbGUiLCJzcGxpdCIsInJlc3BvbnNlIiwic2V0Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(middleware)/./src/middleware.ts\n");

/***/ })

});