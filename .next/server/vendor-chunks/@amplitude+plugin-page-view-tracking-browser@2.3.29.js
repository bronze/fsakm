"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@amplitude+plugin-page-view-tracking-browser@2.3.29";
exports.ids = ["vendor-chunks/@amplitude+plugin-page-view-tracking-browser@2.3.29"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/@amplitude+plugin-page-view-tracking-browser@2.3.29/node_modules/@amplitude/plugin-page-view-tracking-browser/lib/esm/page-view-tracking.js":
/*!************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@amplitude+plugin-page-view-tracking-browser@2.3.29/node_modules/@amplitude/plugin-page-view-tracking-browser/lib/esm/page-view-tracking.js ***!
  \************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   defaultPageViewEvent: () => (/* binding */ defaultPageViewEvent),\n/* harmony export */   pageViewTrackingPlugin: () => (/* binding */ pageViewTrackingPlugin),\n/* harmony export */   shouldTrackHistoryPageView: () => (/* binding */ shouldTrackHistoryPageView)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _amplitude_analytics_client_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @amplitude/analytics-client-common */ \"(ssr)/./node_modules/.pnpm/@amplitude+analytics-client-common@2.3.23/node_modules/@amplitude/analytics-client-common/lib/esm/global-scope.js\");\n/* harmony import */ var _amplitude_analytics_client_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @amplitude/analytics-client-common */ \"(ssr)/./node_modules/.pnpm/@amplitude+analytics-client-common@2.3.23/node_modules/@amplitude/analytics-client-common/lib/esm/attribution/campaign-parser.js\");\n/* harmony import */ var _amplitude_analytics_types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @amplitude/analytics-types */ \"(ssr)/./node_modules/.pnpm/@amplitude+analytics-types@2.9.2/node_modules/@amplitude/analytics-types/lib/esm/event.js\");\n/* harmony import */ var _amplitude_analytics_client_common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @amplitude/analytics-client-common */ \"(ssr)/./node_modules/.pnpm/@amplitude+analytics-client-common@2.3.23/node_modules/@amplitude/analytics-client-common/lib/esm/attribution/constants.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ \"(ssr)/./node_modules/.pnpm/@amplitude+plugin-page-view-tracking-browser@2.3.29/node_modules/@amplitude/plugin-page-view-tracking-browser/lib/esm/utils.js\");\n\n\n\n\n\nvar defaultPageViewEvent = '[Amplitude] Page Viewed';\nvar pageViewTrackingPlugin = function (options) {\n    if (options === void 0) { options = {}; }\n    var amplitude;\n    var globalScope = (0,_amplitude_analytics_client_common__WEBPACK_IMPORTED_MODULE_0__.getGlobalScope)();\n    var loggerProvider = undefined;\n    var isTracking = false;\n    var localConfig;\n    var trackOn = options.trackOn, trackHistoryChanges = options.trackHistoryChanges, _a = options.eventType, eventType = _a === void 0 ? defaultPageViewEvent : _a;\n    var getDecodeURI = function (locationStr) {\n        var decodedLocationStr = locationStr;\n        try {\n            decodedLocationStr = decodeURI(locationStr);\n        }\n        catch (e) {\n            /* istanbul ignore next */\n            loggerProvider === null || loggerProvider === void 0 ? void 0 : loggerProvider.error('Malformed URI sequence: ', e);\n        }\n        return decodedLocationStr;\n    };\n    var createPageViewEvent = function () { return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(void 0, void 0, void 0, function () {\n        var locationHREF, _a;\n        var _b;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_c) {\n            switch (_c.label) {\n                case 0:\n                    locationHREF = getDecodeURI((typeof location !== 'undefined' && location.href) || '');\n                    _b = {\n                        event_type: eventType\n                    };\n                    _a = [{}];\n                    return [4 /*yield*/, getCampaignParams()];\n                case 1: return [2 /*return*/, (_b.event_properties = tslib__WEBPACK_IMPORTED_MODULE_1__.__assign.apply(void 0, [tslib__WEBPACK_IMPORTED_MODULE_1__.__assign.apply(void 0, _a.concat([(_c.sent())])), { '[Amplitude] Page Domain': \n                            /* istanbul ignore next */ (typeof location !== 'undefined' && location.hostname) || '', '[Amplitude] Page Location': locationHREF, '[Amplitude] Page Path': \n                            /* istanbul ignore next */ (typeof location !== 'undefined' && getDecodeURI(location.pathname)) || '', '[Amplitude] Page Title': /* istanbul ignore next */ (typeof document !== 'undefined' && document.title) || '', '[Amplitude] Page URL': locationHREF.split('?')[0] }]),\n                        _b)];\n            }\n        });\n    }); };\n    var shouldTrackOnPageLoad = function () { return typeof trackOn === 'undefined' || (typeof trackOn === 'function' && trackOn()); };\n    /* istanbul ignore next */\n    var previousURL = typeof location !== 'undefined' ? location.href : null;\n    var trackHistoryPageView = function () { return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(void 0, void 0, void 0, function () {\n        var newURL, shouldTrackPageView, _a, _b, _c;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_d) {\n            switch (_d.label) {\n                case 0:\n                    newURL = location.href;\n                    shouldTrackPageView = shouldTrackHistoryPageView(trackHistoryChanges, newURL, previousURL || '') && shouldTrackOnPageLoad();\n                    // Note: Update `previousURL` in the same clock tick as `shouldTrackHistoryPageView()`\n                    // This was previously done after `amplitude?.track(await createPageViewEvent());` and\n                    // causes a concurrency issue where app triggers `pushState` twice with the same URL target\n                    // but `previousURL` is only updated after the second `pushState` producing two page viewed events\n                    previousURL = newURL;\n                    if (!shouldTrackPageView) return [3 /*break*/, 4];\n                    /* istanbul ignore next */\n                    loggerProvider === null || loggerProvider === void 0 ? void 0 : loggerProvider.log('Tracking page view event');\n                    if (!(amplitude === null || amplitude === void 0)) return [3 /*break*/, 1];\n                    _a = void 0;\n                    return [3 /*break*/, 3];\n                case 1:\n                    _c = (_b = amplitude).track;\n                    return [4 /*yield*/, createPageViewEvent()];\n                case 2:\n                    _a = _c.apply(_b, [_d.sent()]);\n                    _d.label = 3;\n                case 3:\n                    _a;\n                    _d.label = 4;\n                case 4: return [2 /*return*/];\n            }\n        });\n    }); };\n    /* istanbul ignore next */\n    var trackHistoryPageViewWrapper = function () {\n        void trackHistoryPageView();\n    };\n    var plugin = {\n        name: '@amplitude/plugin-page-view-tracking-browser',\n        type: 'enrichment',\n        setup: function (config, client) { return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(void 0, void 0, void 0, function () {\n            var _a, _b;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        amplitude = client;\n                        localConfig = config;\n                        loggerProvider = config.loggerProvider;\n                        loggerProvider.log('Installing @amplitude/plugin-page-view-tracking-browser');\n                        isTracking = true;\n                        if (globalScope) {\n                            globalScope.addEventListener('popstate', trackHistoryPageViewWrapper);\n                            /* istanbul ignore next */\n                            // There is no global browser listener for changes to history, so we have\n                            // to modify pushState directly.\n                            // https://stackoverflow.com/a/64927639\n                            // eslint-disable-next-line @typescript-eslint/unbound-method\n                            globalScope.history.pushState = new Proxy(globalScope.history.pushState, {\n                                apply: function (target, thisArg, _a) {\n                                    var _b = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__read)(_a, 3), state = _b[0], unused = _b[1], url = _b[2];\n                                    target.apply(thisArg, [state, unused, url]);\n                                    if (isTracking) {\n                                        void trackHistoryPageView();\n                                    }\n                                },\n                            });\n                        }\n                        if (!shouldTrackOnPageLoad()) return [3 /*break*/, 2];\n                        loggerProvider.log('Tracking page view event');\n                        _b = (_a = amplitude).track;\n                        return [4 /*yield*/, createPageViewEvent()];\n                    case 1:\n                        _b.apply(_a, [_c.sent()]);\n                        _c.label = 2;\n                    case 2: return [2 /*return*/];\n                }\n            });\n        }); },\n        execute: function (event) { return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(void 0, void 0, void 0, function () {\n            var pageViewEvent;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(trackOn === 'attribution' && isCampaignEvent(event))) return [3 /*break*/, 2];\n                        /* istanbul ignore next */ // loggerProvider should be defined by the time execute is invoked\n                        loggerProvider === null || loggerProvider === void 0 ? void 0 : loggerProvider.log('Enriching campaign event to page view event with campaign parameters');\n                        return [4 /*yield*/, createPageViewEvent()];\n                    case 1:\n                        pageViewEvent = _a.sent();\n                        event.event_type = pageViewEvent.event_type;\n                        event.event_properties = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, event.event_properties), pageViewEvent.event_properties);\n                        _a.label = 2;\n                    case 2:\n                        // Update the pageCounter for the page view event\n                        if (localConfig && event.event_type === eventType) {\n                            localConfig.pageCounter = !localConfig.pageCounter ? 1 : localConfig.pageCounter + 1;\n                            event.event_properties = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, event.event_properties), { '[Amplitude] Page Counter': localConfig.pageCounter });\n                        }\n                        return [2 /*return*/, event];\n                }\n            });\n        }); },\n        teardown: function () { return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(void 0, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n                if (globalScope) {\n                    globalScope.removeEventListener('popstate', trackHistoryPageViewWrapper);\n                    isTracking = false;\n                }\n                return [2 /*return*/];\n            });\n        }); },\n    };\n    return plugin;\n};\nvar getCampaignParams = function () { return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(void 0, void 0, void 0, function () { var _a; return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_b) {\n    switch (_b.label) {\n        case 0:\n            _a = _utils__WEBPACK_IMPORTED_MODULE_2__.omitUndefined;\n            return [4 /*yield*/, new _amplitude_analytics_client_common__WEBPACK_IMPORTED_MODULE_3__.CampaignParser().parse()];\n        case 1: return [2 /*return*/, _a.apply(void 0, [_b.sent()])];\n    }\n}); }); };\nvar isCampaignEvent = function (event) {\n    if (event.event_type === '$identify' && event.user_properties) {\n        var properties = event.user_properties;\n        var $set = properties[_amplitude_analytics_types__WEBPACK_IMPORTED_MODULE_4__.IdentifyOperation.SET] || {};\n        var $unset = properties[_amplitude_analytics_types__WEBPACK_IMPORTED_MODULE_4__.IdentifyOperation.UNSET] || {};\n        var userProperties_1 = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__spreadArray)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__spreadArray)([], (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__read)(Object.keys($set)), false), (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__read)(Object.keys($unset)), false);\n        return Object.keys(_amplitude_analytics_client_common__WEBPACK_IMPORTED_MODULE_5__.BASE_CAMPAIGN).every(function (value) { return userProperties_1.includes(value); });\n    }\n    return false;\n};\nvar shouldTrackHistoryPageView = function (trackingOption, newURLStr, oldURLStr) {\n    switch (trackingOption) {\n        case 'pathOnly': {\n            if (oldURLStr == '')\n                return true;\n            var newURL = new URL(newURLStr);\n            var oldURL = new URL(oldURLStr);\n            var newBaseStr = newURL.origin + newURL.pathname;\n            var oldBaseStr = oldURL.origin + oldURL.pathname;\n            return newBaseStr !== oldBaseStr;\n        }\n        default:\n            return newURLStr !== oldURLStr;\n    }\n};\n//# sourceMappingURL=page-view-tracking.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQGFtcGxpdHVkZStwbHVnaW4tcGFnZS12aWV3LXRyYWNraW5nLWJyb3dzZXJAMi4zLjI5L25vZGVfbW9kdWxlcy9AYW1wbGl0dWRlL3BsdWdpbi1wYWdlLXZpZXctdHJhY2tpbmctYnJvd3Nlci9saWIvZXNtL3BhZ2Utdmlldy10cmFja2luZy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBZ0Y7QUFDSTtBQUNwQjtBQUNHO0FBQzNCO0FBQ2pDO0FBQ0E7QUFDUCw4QkFBOEI7QUFDOUI7QUFDQSxzQkFBc0Isa0ZBQWM7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLE9BQU8sZ0RBQVM7QUFDNUQ7QUFDQTtBQUNBLGVBQWUsa0RBQVc7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0EscUVBQXFFLDJDQUFRLGdCQUFnQiwyQ0FBUSw0Q0FBNEM7QUFDako7QUFDQSx1U0FBdVM7QUFDdlM7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0wsOENBQThDO0FBQzlDO0FBQ0E7QUFDQSw2Q0FBNkMsT0FBTyxnREFBUztBQUM3RDtBQUNBLGVBQWUsa0RBQVc7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFHQUFxRztBQUNyRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxPQUFPLGdEQUFTO0FBQzNEO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLDZDQUFNO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTLElBQUk7QUFDYixvQ0FBb0MsT0FBTyxnREFBUztBQUNwRDtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHLDZCQUE2QixxREFBcUQ7QUFDM0o7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVMsSUFBSTtBQUNiLGdDQUFnQyxPQUFPLGdEQUFTO0FBQ2hELG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVMsSUFBSTtBQUNiO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxPQUFPLGdEQUFTLHVDQUF1QyxRQUFRLE9BQU8sa0RBQVc7QUFDdkg7QUFDQTtBQUNBLGlCQUFpQixpREFBYTtBQUM5QixxQ0FBcUMsOEVBQWM7QUFDbkQ7QUFDQTtBQUNBLENBQUMsSUFBSTtBQUNMO0FBQ0E7QUFDQTtBQUNBLDhCQUE4Qix5RUFBaUI7QUFDL0MsZ0NBQWdDLHlFQUFpQjtBQUNqRCwrQkFBK0Isb0RBQWEsQ0FBQyxvREFBYSxLQUFLLDZDQUFNLDZCQUE2Qiw2Q0FBTTtBQUN4RywyQkFBMkIsNkVBQWEsMkJBQTJCLDBDQUEwQztBQUM3RztBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL2hvbWUvYnJvbnplL2NvZGluZy9mc2FrbS9ub2RlX21vZHVsZXMvLnBucG0vQGFtcGxpdHVkZStwbHVnaW4tcGFnZS12aWV3LXRyYWNraW5nLWJyb3dzZXJAMi4zLjI5L25vZGVfbW9kdWxlcy9AYW1wbGl0dWRlL3BsdWdpbi1wYWdlLXZpZXctdHJhY2tpbmctYnJvd3Nlci9saWIvZXNtL3BhZ2Utdmlldy10cmFja2luZy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2Fzc2lnbiwgX19hd2FpdGVyLCBfX2dlbmVyYXRvciwgX19yZWFkLCBfX3NwcmVhZEFycmF5IH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBDYW1wYWlnblBhcnNlciwgZ2V0R2xvYmFsU2NvcGUgfSBmcm9tICdAYW1wbGl0dWRlL2FuYWx5dGljcy1jbGllbnQtY29tbW9uJztcbmltcG9ydCB7IElkZW50aWZ5T3BlcmF0aW9uLCB9IGZyb20gJ0BhbXBsaXR1ZGUvYW5hbHl0aWNzLXR5cGVzJztcbmltcG9ydCB7IEJBU0VfQ0FNUEFJR04gfSBmcm9tICdAYW1wbGl0dWRlL2FuYWx5dGljcy1jbGllbnQtY29tbW9uJztcbmltcG9ydCB7IG9taXRVbmRlZmluZWQgfSBmcm9tICcuL3V0aWxzJztcbmV4cG9ydCB2YXIgZGVmYXVsdFBhZ2VWaWV3RXZlbnQgPSAnW0FtcGxpdHVkZV0gUGFnZSBWaWV3ZWQnO1xuZXhwb3J0IHZhciBwYWdlVmlld1RyYWNraW5nUGx1Z2luID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSB7fTsgfVxuICAgIHZhciBhbXBsaXR1ZGU7XG4gICAgdmFyIGdsb2JhbFNjb3BlID0gZ2V0R2xvYmFsU2NvcGUoKTtcbiAgICB2YXIgbG9nZ2VyUHJvdmlkZXIgPSB1bmRlZmluZWQ7XG4gICAgdmFyIGlzVHJhY2tpbmcgPSBmYWxzZTtcbiAgICB2YXIgbG9jYWxDb25maWc7XG4gICAgdmFyIHRyYWNrT24gPSBvcHRpb25zLnRyYWNrT24sIHRyYWNrSGlzdG9yeUNoYW5nZXMgPSBvcHRpb25zLnRyYWNrSGlzdG9yeUNoYW5nZXMsIF9hID0gb3B0aW9ucy5ldmVudFR5cGUsIGV2ZW50VHlwZSA9IF9hID09PSB2b2lkIDAgPyBkZWZhdWx0UGFnZVZpZXdFdmVudCA6IF9hO1xuICAgIHZhciBnZXREZWNvZGVVUkkgPSBmdW5jdGlvbiAobG9jYXRpb25TdHIpIHtcbiAgICAgICAgdmFyIGRlY29kZWRMb2NhdGlvblN0ciA9IGxvY2F0aW9uU3RyO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZGVjb2RlZExvY2F0aW9uU3RyID0gZGVjb2RlVVJJKGxvY2F0aW9uU3RyKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgICAgICAgIGxvZ2dlclByb3ZpZGVyID09PSBudWxsIHx8IGxvZ2dlclByb3ZpZGVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBsb2dnZXJQcm92aWRlci5lcnJvcignTWFsZm9ybWVkIFVSSSBzZXF1ZW5jZTogJywgZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlY29kZWRMb2NhdGlvblN0cjtcbiAgICB9O1xuICAgIHZhciBjcmVhdGVQYWdlVmlld0V2ZW50ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGxvY2F0aW9uSFJFRiwgX2E7XG4gICAgICAgIHZhciBfYjtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYykge1xuICAgICAgICAgICAgc3dpdGNoIChfYy5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25IUkVGID0gZ2V0RGVjb2RlVVJJKCh0eXBlb2YgbG9jYXRpb24gIT09ICd1bmRlZmluZWQnICYmIGxvY2F0aW9uLmhyZWYpIHx8ICcnKTtcbiAgICAgICAgICAgICAgICAgICAgX2IgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudF90eXBlOiBldmVudFR5cGVcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgX2EgPSBbe31dO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBnZXRDYW1wYWlnblBhcmFtcygpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6IHJldHVybiBbMiAvKnJldHVybiovLCAoX2IuZXZlbnRfcHJvcGVydGllcyA9IF9fYXNzaWduLmFwcGx5KHZvaWQgMCwgW19fYXNzaWduLmFwcGx5KHZvaWQgMCwgX2EuY29uY2F0KFsoX2Muc2VudCgpKV0pKSwgeyAnW0FtcGxpdHVkZV0gUGFnZSBEb21haW4nOiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyAodHlwZW9mIGxvY2F0aW9uICE9PSAndW5kZWZpbmVkJyAmJiBsb2NhdGlvbi5ob3N0bmFtZSkgfHwgJycsICdbQW1wbGl0dWRlXSBQYWdlIExvY2F0aW9uJzogbG9jYXRpb25IUkVGLCAnW0FtcGxpdHVkZV0gUGFnZSBQYXRoJzogXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gKHR5cGVvZiBsb2NhdGlvbiAhPT0gJ3VuZGVmaW5lZCcgJiYgZ2V0RGVjb2RlVVJJKGxvY2F0aW9uLnBhdGhuYW1lKSkgfHwgJycsICdbQW1wbGl0dWRlXSBQYWdlIFRpdGxlJzogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgZG9jdW1lbnQudGl0bGUpIHx8ICcnLCAnW0FtcGxpdHVkZV0gUGFnZSBVUkwnOiBsb2NhdGlvbkhSRUYuc3BsaXQoJz8nKVswXSB9XSksXG4gICAgICAgICAgICAgICAgICAgICAgICBfYildO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTsgfTtcbiAgICB2YXIgc2hvdWxkVHJhY2tPblBhZ2VMb2FkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdHlwZW9mIHRyYWNrT24gPT09ICd1bmRlZmluZWQnIHx8ICh0eXBlb2YgdHJhY2tPbiA9PT0gJ2Z1bmN0aW9uJyAmJiB0cmFja09uKCkpOyB9O1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgdmFyIHByZXZpb3VzVVJMID0gdHlwZW9mIGxvY2F0aW9uICE9PSAndW5kZWZpbmVkJyA/IGxvY2F0aW9uLmhyZWYgOiBudWxsO1xuICAgIHZhciB0cmFja0hpc3RvcnlQYWdlVmlldyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBuZXdVUkwsIHNob3VsZFRyYWNrUGFnZVZpZXcsIF9hLCBfYiwgX2M7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2QpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2QubGFiZWwpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIG5ld1VSTCA9IGxvY2F0aW9uLmhyZWY7XG4gICAgICAgICAgICAgICAgICAgIHNob3VsZFRyYWNrUGFnZVZpZXcgPSBzaG91bGRUcmFja0hpc3RvcnlQYWdlVmlldyh0cmFja0hpc3RvcnlDaGFuZ2VzLCBuZXdVUkwsIHByZXZpb3VzVVJMIHx8ICcnKSAmJiBzaG91bGRUcmFja09uUGFnZUxvYWQoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gTm90ZTogVXBkYXRlIGBwcmV2aW91c1VSTGAgaW4gdGhlIHNhbWUgY2xvY2sgdGljayBhcyBgc2hvdWxkVHJhY2tIaXN0b3J5UGFnZVZpZXcoKWBcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyB3YXMgcHJldmlvdXNseSBkb25lIGFmdGVyIGBhbXBsaXR1ZGU/LnRyYWNrKGF3YWl0IGNyZWF0ZVBhZ2VWaWV3RXZlbnQoKSk7YCBhbmRcbiAgICAgICAgICAgICAgICAgICAgLy8gY2F1c2VzIGEgY29uY3VycmVuY3kgaXNzdWUgd2hlcmUgYXBwIHRyaWdnZXJzIGBwdXNoU3RhdGVgIHR3aWNlIHdpdGggdGhlIHNhbWUgVVJMIHRhcmdldFxuICAgICAgICAgICAgICAgICAgICAvLyBidXQgYHByZXZpb3VzVVJMYCBpcyBvbmx5IHVwZGF0ZWQgYWZ0ZXIgdGhlIHNlY29uZCBgcHVzaFN0YXRlYCBwcm9kdWNpbmcgdHdvIHBhZ2Ugdmlld2VkIGV2ZW50c1xuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1VSTCA9IG5ld1VSTDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzaG91bGRUcmFja1BhZ2VWaWV3KSByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyUHJvdmlkZXIgPT09IG51bGwgfHwgbG9nZ2VyUHJvdmlkZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGxvZ2dlclByb3ZpZGVyLmxvZygnVHJhY2tpbmcgcGFnZSB2aWV3IGV2ZW50Jyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKGFtcGxpdHVkZSA9PT0gbnVsbCB8fCBhbXBsaXR1ZGUgPT09IHZvaWQgMCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDFdO1xuICAgICAgICAgICAgICAgICAgICBfYSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBfYyA9IChfYiA9IGFtcGxpdHVkZSkudHJhY2s7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGNyZWF0ZVBhZ2VWaWV3RXZlbnQoKV07XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBfYSA9IF9jLmFwcGx5KF9iLCBbX2Quc2VudCgpXSk7XG4gICAgICAgICAgICAgICAgICAgIF9kLmxhYmVsID0gMztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIF9hO1xuICAgICAgICAgICAgICAgICAgICBfZC5sYWJlbCA9IDQ7XG4gICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pOyB9O1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgdmFyIHRyYWNrSGlzdG9yeVBhZ2VWaWV3V3JhcHBlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdm9pZCB0cmFja0hpc3RvcnlQYWdlVmlldygpO1xuICAgIH07XG4gICAgdmFyIHBsdWdpbiA9IHtcbiAgICAgICAgbmFtZTogJ0BhbXBsaXR1ZGUvcGx1Z2luLXBhZ2Utdmlldy10cmFja2luZy1icm93c2VyJyxcbiAgICAgICAgdHlwZTogJ2VucmljaG1lbnQnLFxuICAgICAgICBzZXR1cDogZnVuY3Rpb24gKGNvbmZpZywgY2xpZW50KSB7IHJldHVybiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2MpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtcGxpdHVkZSA9IGNsaWVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsQ29uZmlnID0gY29uZmlnO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyUHJvdmlkZXIgPSBjb25maWcubG9nZ2VyUHJvdmlkZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXJQcm92aWRlci5sb2coJ0luc3RhbGxpbmcgQGFtcGxpdHVkZS9wbHVnaW4tcGFnZS12aWV3LXRyYWNraW5nLWJyb3dzZXInKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzVHJhY2tpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdsb2JhbFNjb3BlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsU2NvcGUuYWRkRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCB0cmFja0hpc3RvcnlQYWdlVmlld1dyYXBwZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlcmUgaXMgbm8gZ2xvYmFsIGJyb3dzZXIgbGlzdGVuZXIgZm9yIGNoYW5nZXMgdG8gaGlzdG9yeSwgc28gd2UgaGF2ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRvIG1vZGlmeSBwdXNoU3RhdGUgZGlyZWN0bHkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzY0OTI3NjM5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC91bmJvdW5kLW1ldGhvZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbFNjb3BlLmhpc3RvcnkucHVzaFN0YXRlID0gbmV3IFByb3h5KGdsb2JhbFNjb3BlLmhpc3RvcnkucHVzaFN0YXRlLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGx5OiBmdW5jdGlvbiAodGFyZ2V0LCB0aGlzQXJnLCBfYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9iID0gX19yZWFkKF9hLCAzKSwgc3RhdGUgPSBfYlswXSwgdW51c2VkID0gX2JbMV0sIHVybCA9IF9iWzJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmFwcGx5KHRoaXNBcmcsIFtzdGF0ZSwgdW51c2VkLCB1cmxdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1RyYWNraW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCB0cmFja0hpc3RvcnlQYWdlVmlldygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzaG91bGRUcmFja09uUGFnZUxvYWQoKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXJQcm92aWRlci5sb2coJ1RyYWNraW5nIHBhZ2UgdmlldyBldmVudCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2IgPSAoX2EgPSBhbXBsaXR1ZGUpLnRyYWNrO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgY3JlYXRlUGFnZVZpZXdFdmVudCgpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2IuYXBwbHkoX2EsIFtfYy5zZW50KCldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jLmxhYmVsID0gMjtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pOyB9LFxuICAgICAgICBleGVjdXRlOiBmdW5jdGlvbiAoZXZlbnQpIHsgcmV0dXJuIF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcGFnZVZpZXdFdmVudDtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHRyYWNrT24gPT09ICdhdHRyaWJ1dGlvbicgJiYgaXNDYW1wYWlnbkV2ZW50KGV2ZW50KSkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gLy8gbG9nZ2VyUHJvdmlkZXIgc2hvdWxkIGJlIGRlZmluZWQgYnkgdGhlIHRpbWUgZXhlY3V0ZSBpcyBpbnZva2VkXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXJQcm92aWRlciA9PT0gbnVsbCB8fCBsb2dnZXJQcm92aWRlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogbG9nZ2VyUHJvdmlkZXIubG9nKCdFbnJpY2hpbmcgY2FtcGFpZ24gZXZlbnQgdG8gcGFnZSB2aWV3IGV2ZW50IHdpdGggY2FtcGFpZ24gcGFyYW1ldGVycycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgY3JlYXRlUGFnZVZpZXdFdmVudCgpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcGFnZVZpZXdFdmVudCA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LmV2ZW50X3R5cGUgPSBwYWdlVmlld0V2ZW50LmV2ZW50X3R5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC5ldmVudF9wcm9wZXJ0aWVzID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGV2ZW50LmV2ZW50X3Byb3BlcnRpZXMpLCBwYWdlVmlld0V2ZW50LmV2ZW50X3Byb3BlcnRpZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHBhZ2VDb3VudGVyIGZvciB0aGUgcGFnZSB2aWV3IGV2ZW50XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9jYWxDb25maWcgJiYgZXZlbnQuZXZlbnRfdHlwZSA9PT0gZXZlbnRUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxDb25maWcucGFnZUNvdW50ZXIgPSAhbG9jYWxDb25maWcucGFnZUNvdW50ZXIgPyAxIDogbG9jYWxDb25maWcucGFnZUNvdW50ZXIgKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LmV2ZW50X3Byb3BlcnRpZXMgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZXZlbnQuZXZlbnRfcHJvcGVydGllcyksIHsgJ1tBbXBsaXR1ZGVdIFBhZ2UgQ291bnRlcic6IGxvY2FsQ29uZmlnLnBhZ2VDb3VudGVyIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGV2ZW50XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7IH0sXG4gICAgICAgIHRlYXJkb3duOiBmdW5jdGlvbiAoKSB7IHJldHVybiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIGlmIChnbG9iYWxTY29wZSkge1xuICAgICAgICAgICAgICAgICAgICBnbG9iYWxTY29wZS5yZW1vdmVFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsIHRyYWNrSGlzdG9yeVBhZ2VWaWV3V3JhcHBlcik7XG4gICAgICAgICAgICAgICAgICAgIGlzVHJhY2tpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pOyB9LFxuICAgIH07XG4gICAgcmV0dXJuIHBsdWdpbjtcbn07XG52YXIgZ2V0Q2FtcGFpZ25QYXJhbXMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkgeyB2YXIgX2E7IHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcbiAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIF9hID0gb21pdFVuZGVmaW5lZDtcbiAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIG5ldyBDYW1wYWlnblBhcnNlcigpLnBhcnNlKCldO1xuICAgICAgICBjYXNlIDE6IHJldHVybiBbMiAvKnJldHVybiovLCBfYS5hcHBseSh2b2lkIDAsIFtfYi5zZW50KCldKV07XG4gICAgfVxufSk7IH0pOyB9O1xudmFyIGlzQ2FtcGFpZ25FdmVudCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgIGlmIChldmVudC5ldmVudF90eXBlID09PSAnJGlkZW50aWZ5JyAmJiBldmVudC51c2VyX3Byb3BlcnRpZXMpIHtcbiAgICAgICAgdmFyIHByb3BlcnRpZXMgPSBldmVudC51c2VyX3Byb3BlcnRpZXM7XG4gICAgICAgIHZhciAkc2V0ID0gcHJvcGVydGllc1tJZGVudGlmeU9wZXJhdGlvbi5TRVRdIHx8IHt9O1xuICAgICAgICB2YXIgJHVuc2V0ID0gcHJvcGVydGllc1tJZGVudGlmeU9wZXJhdGlvbi5VTlNFVF0gfHwge307XG4gICAgICAgIHZhciB1c2VyUHJvcGVydGllc18xID0gX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtdLCBfX3JlYWQoT2JqZWN0LmtleXMoJHNldCkpLCBmYWxzZSksIF9fcmVhZChPYmplY3Qua2V5cygkdW5zZXQpKSwgZmFsc2UpO1xuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoQkFTRV9DQU1QQUlHTikuZXZlcnkoZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiB1c2VyUHJvcGVydGllc18xLmluY2x1ZGVzKHZhbHVlKTsgfSk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG5leHBvcnQgdmFyIHNob3VsZFRyYWNrSGlzdG9yeVBhZ2VWaWV3ID0gZnVuY3Rpb24gKHRyYWNraW5nT3B0aW9uLCBuZXdVUkxTdHIsIG9sZFVSTFN0cikge1xuICAgIHN3aXRjaCAodHJhY2tpbmdPcHRpb24pIHtcbiAgICAgICAgY2FzZSAncGF0aE9ubHknOiB7XG4gICAgICAgICAgICBpZiAob2xkVVJMU3RyID09ICcnKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgdmFyIG5ld1VSTCA9IG5ldyBVUkwobmV3VVJMU3RyKTtcbiAgICAgICAgICAgIHZhciBvbGRVUkwgPSBuZXcgVVJMKG9sZFVSTFN0cik7XG4gICAgICAgICAgICB2YXIgbmV3QmFzZVN0ciA9IG5ld1VSTC5vcmlnaW4gKyBuZXdVUkwucGF0aG5hbWU7XG4gICAgICAgICAgICB2YXIgb2xkQmFzZVN0ciA9IG9sZFVSTC5vcmlnaW4gKyBvbGRVUkwucGF0aG5hbWU7XG4gICAgICAgICAgICByZXR1cm4gbmV3QmFzZVN0ciAhPT0gb2xkQmFzZVN0cjtcbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIG5ld1VSTFN0ciAhPT0gb2xkVVJMU3RyO1xuICAgIH1cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlLXZpZXctdHJhY2tpbmcuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@amplitude+plugin-page-view-tracking-browser@2.3.29/node_modules/@amplitude/plugin-page-view-tracking-browser/lib/esm/page-view-tracking.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@amplitude+plugin-page-view-tracking-browser@2.3.29/node_modules/@amplitude/plugin-page-view-tracking-browser/lib/esm/utils.js":
/*!***********************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@amplitude+plugin-page-view-tracking-browser@2.3.29/node_modules/@amplitude/plugin-page-view-tracking-browser/lib/esm/utils.js ***!
  \***********************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   omitUndefined: () => (/* binding */ omitUndefined)\n/* harmony export */ });\nvar omitUndefined = function (input) {\n    var obj = {};\n    for (var key in input) {\n        var val = input[key];\n        if (val) {\n            obj[key] = val;\n        }\n    }\n    return obj;\n};\n//# sourceMappingURL=utils.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQGFtcGxpdHVkZStwbHVnaW4tcGFnZS12aWV3LXRyYWNraW5nLWJyb3dzZXJAMi4zLjI5L25vZGVfbW9kdWxlcy9AYW1wbGl0dWRlL3BsdWdpbi1wYWdlLXZpZXctdHJhY2tpbmctYnJvd3Nlci9saWIvZXNtL3V0aWxzLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvaG9tZS9icm9uemUvY29kaW5nL2ZzYWttL25vZGVfbW9kdWxlcy8ucG5wbS9AYW1wbGl0dWRlK3BsdWdpbi1wYWdlLXZpZXctdHJhY2tpbmctYnJvd3NlckAyLjMuMjkvbm9kZV9tb2R1bGVzL0BhbXBsaXR1ZGUvcGx1Z2luLXBhZ2Utdmlldy10cmFja2luZy1icm93c2VyL2xpYi9lc20vdXRpbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHZhciBvbWl0VW5kZWZpbmVkID0gZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgdmFyIG9iaiA9IHt9O1xuICAgIGZvciAodmFyIGtleSBpbiBpbnB1dCkge1xuICAgICAgICB2YXIgdmFsID0gaW5wdXRba2V5XTtcbiAgICAgICAgaWYgKHZhbCkge1xuICAgICAgICAgICAgb2JqW2tleV0gPSB2YWw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@amplitude+plugin-page-view-tracking-browser@2.3.29/node_modules/@amplitude/plugin-page-view-tracking-browser/lib/esm/utils.js\n");

/***/ })

};
;